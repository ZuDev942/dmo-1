import{_ as V,d as B,b as h,r as p,o as R,s as k,v as j,c as a,e as n,g as u,w as i,h as r,T as K,y as w,H as b,z as E,B as N,x as y,K as d,C as o,t as M,q as A,f as x,a3 as D,p as Y,j as q,m as z}from"./index.675d893b.js";import{d as P}from"./dayoffService.34f7e346.js";const O=f=>(Y("data-v-ff80e0b2"),f=f(),q(),f),F={class:"project"},L={key:1,class:"flex items-center"},$=O(()=>x("img",{src:"https://hoondea.atlassian.net/secure/viewavatar?size=xxxlarge@2x&avatarId=10425&avatarType=project",alt:"",style:{width:"2.4rem",height:"2.4rem","border-radius":"2px","margin-right":"0.5rem"}},null,-1)),H={key:2},J={key:3},G={key:4},Q={key:5},W={class:"text-[#968cd8] font-[600] text-[1.2rem]"},X={class:"text-[#54b3a5] font-[600] text-[1.2rem]"},Z={key:1,class:"flex items-center"},tt=O(()=>x("img",{src:"https://hoondea.atlassian.net/secure/viewavatar?size=xxxlarge@2x&avatarId=10425&avatarType=project",alt:"",style:{width:"2.4rem",height:"2.4rem","border-radius":"2px","margin-right":"0.5rem"}},null,-1)),et={key:2},at={key:3},st={key:4},nt={key:5},dt=B({__name:"index",setup(f){const c=h({loading:!1,noDataText:"No data",pagination:{totalPage:0,page:1},data:[],columns:[{dataIndex:"name",key:"name",title:"Name",width:"250px"},{title:"User ID",dataIndex:"id",key:"id"},{title:"Reason",dataIndex:"reason",key:"reason",width:"250px"},{title:"Off date",key:"time",dataIndex:"time"},{title:"Off type",dataIndex:"type",key:"type",width:"200px"},{title:"Status",dataIndex:"status",key:"status",width:"200px"}]}),_=h({loading:!1,noDataText:"No data",pagination:{totalPage:0,page:1},data:[],columns:[{dataIndex:"name",key:"name",title:"Name",width:"250px"},{title:"User ID",dataIndex:"id",key:"id"},{title:"Reason",dataIndex:"reason",key:"reason",width:"250px"},{title:"Off date",key:"time",dataIndex:"time"},{title:"Off type",dataIndex:"type",key:"type",width:"200px"},{title:"Status",dataIndex:"status",key:"status",width:"200px"}]});p("Accept");const g=p(""),I=h({pageIndex:1,pageSize:20,keyword:""});R(()=>{m()});async function m(){c.loading=!0;const s=await P.getDayoff(I).finally(()=>{c.loading=!1});s.status==="SUCCESS"&&(c.data=s.data.data,c.data=k.exports.filter(s.data.data,l=>l.status==="TO_APPROVE"),_.data=k.exports.filter(s.data.data,l=>l.status!=="TO_APPROVE"))}j(g,k.exports.debounce(()=>{I.keyword=g.value,m()},300));const v=s=>M(s).format("DD-MM-YYYY"),T=s=>s==="MATERNITY_LEAVE"?"Maternity leave":s==="UNPAID_LEAVE"?"Unpaid leave":"";async function C(s,l){const t={id:l,approveStatus:"ACCEPT",accountId:null};s===0&&(t.approveStatus="ACCEPT"),s===1&&(t.approveStatus="REJECT"),console.log(t);const e=await P.putDayoff(t);console.log(e),e.status==="SUCCESS"&&(z.success("Update status absents successfull!"),m())}const S=p("1");return p(""),p(""),(s,l)=>(a(),n("div",F,[u(r(K),{activeKey:S.value,"onUpdate:activeKey":l[0]||(l[0]=t=>S.value=t)},{default:i(()=>[u(r(w),{key:"1",tab:"Absence request"},{default:i(()=>[u(r(b),{columns:c.columns,"data-source":c.data,pagination:!1,loading:c.loading,scroll:{y:700}},{bodyCell:i(({column:t,record:e})=>[t.dataIndex==="status"?(a(),n(E,{key:0},[u(r(N),{class:"text-[1.3rem] mr-5",onClick:U=>C(0,e.id)},{default:i(()=>[y(" Accept ")]),_:2},1032,["onClick"]),u(r(N),{class:"text-[1.3rem]",onClick:U=>C(1,e.id)},{default:i(()=>[y("Reject")]),_:2},1032,["onClick"])],64)):d("",!0),t.dataIndex==="name"?(a(),n("div",L,[$,y(" "+o(e.fullName),1)])):d("",!0),t.dataIndex==="type"?(a(),n("span",H,o(T(e.dayOffType)),1)):d("",!0),t.dataIndex==="id"?(a(),n("span",J,o(e.userName),1)):d("",!0),t.dataIndex==="reason"?(a(),n("span",G,o(e.reason),1)):d("",!0),t.dataIndex==="time"?(a(),n("span",Q,o(v(e.time)),1)):d("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),u(r(w),{key:"2",tab:"Offtime"},{default:i(()=>[u(r(b),{columns:_.columns,"data-source":_.data,pagination:!1,scroll:{y:530}},{bodyCell:i(({column:t,record:e})=>[t.dataIndex==="status"?(a(),n(E,{key:0},[e.status==="ACCEPT"?(a(),A(r(D),{key:0,color:"#F0EEFB"},{default:i(()=>[x("span",W,o(e.status),1)]),_:2},1024)):(a(),A(r(D),{key:1,color:"#e6f4f2"},{default:i(()=>[x("span",X,o(e.status),1)]),_:2},1024))],64)):d("",!0),t.dataIndex==="name"?(a(),n("div",Z,[tt,y(" "+o(e.fullName),1)])):d("",!0),t.dataIndex==="type"?(a(),n("span",et,o(T(e.dayOffType)),1)):d("",!0),t.dataIndex==="id"?(a(),n("span",at,o(e.userName),1)):d("",!0),t.dataIndex==="reason"?(a(),n("span",st,o(e.reason),1)):d("",!0),t.dataIndex==="time"?(a(),n("span",nt,o(v(e.time)),1)):d("",!0)]),_:1},8,["columns","data-source"])]),_:1})]),_:1},8,["activeKey"])]))}});var rt=V(dt,[["__scopeId","data-v-ff80e0b2"]]);export{rt as default};
