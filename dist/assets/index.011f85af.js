import{P as X}from"./index.346d616c.js";import{_ as Z,d as ee,a2 as te,b as ae,r as n,o as se,v as j,s as M,u as oe,c as u,e as h,f as l,g as i,h as o,I as le,q as d,a4 as ne,a5 as ie,w as r,W as b,B as re,K as m,H as ue,ai as D,x as g,aj as ce,C as p,z as de,a3 as P,a7 as pe,a8 as ve,p as _e,j as me,V as ye,aa as fe,m as Ce,R as G}from"./index.675d893b.js";import{p as U}from"./projectService.fc7345ac.js";import"./calender.04ec6997.js";const he=E=>(_e("data-v-5de7bbfe"),E=E(),me(),E),Ee={class:"project h-full"},xe={class:"project__head"},Se={class:"project__filter flex"},je={class:"project__search"},ge={class:"project__icon"},Pe={class:"project__wrap"},Te={class:"project__list"},Ie=["onClick"],ke=he(()=>l("img",{src:"https://hoondea.atlassian.net/secure/viewavatar?size=xxxlarge@2x&avatarId=10425&avatarType=project",alt:"",style:{width:"2.4rem",height:"2.4rem","border-radius":"2px","margin-right":"0.5rem"}},null,-1)),Ne={class:"cursor-pointer text-[#42526E] font-[500] text-[1.3rem]"},be={key:3,class:"flex items-center"},De=["src"],Oe={key:4,class:"flex items-center justify-between"},we={class:"cursor-pointer text-[#44546f] font-[700] text-[1.1rem]"},Le={class:"cursor-pointer text-[#216E4E] font-[700] text-[1.1rem]"},Ae={class:"cursor-pointer text-[#0055CC] font-[700] text-[1.1rem]"},Re={class:"project__action"},Me=["onClick"],Ge=["onClick"],Ue=["onClick"],Fe=ee({__name:"index",setup(E){const{emitEvent:O}=te(),x=ae({loading:!1,noDataText:"No data",pagination:{totalPage:0,page:1},data:[],columns:[{title:"Name",dataIndex:"name",width:300},{title:"Key",dataIndex:"content",width:140},{title:"Type",dataIndex:"type",width:"120px"},{title:"Team",dataIndex:"lead",width:"200px"},{title:"Status",dataIndex:"status",width:"200px"}]}),F=n([{value:"COMPANY",label:"Company"},{value:"PROJECT",label:"Project"},{value:"ALL",label:"Type"}]),V=n([{value:"NOT_STARTED",label:"Not Started"},{value:"PENDING",label:"Pending"},{value:"PROCESSING",label:"Processing"},{value:"COMPLETED",label:"Completed"},{value:"CANCELED",label:"Canceled"},{value:"ALL",label:"Status"}]),B=n([{value:"LOW",label:"Low"},{value:"MEDIUM",label:"Medium"},{value:"HIGH",label:"High"},{value:"URGENT",label:"Urgent"},{value:"ALL",label:"Priority"}]),v=n(""),S=n(!1),y=n("Type"),f=n("Priority"),C=n("Status"),c=n({pageIndex:1,pageSize:20,keyword:null,type:null,status:null,priority:null}),w=n(!1);se(()=>{_();const e=localStorage.getItem("userInfo");if(e){const t=JSON.parse(e);w.value=t.role==="MANAGER"}});const T=n(""),I=n(0),L=n(0);j(y,()=>{y.value==="ALL"?c.type=null:c.type=y.value,_()}),j(C,()=>{C.value==="ALL"?c.status=null:c.status=C.value,_()}),j(f,()=>{f.value==="ALL"?c.priority=null:c.priority=f.value,_()}),j(v,M.exports.debounce(()=>{c.value.keyword=v.value,_()},300));function $(){v.value=""}const A=n("");function J(){S.value=!0,T.value="create",I.value+=1,A.value="Create Project"}function z(e){S.value=!0,T.value="detail",I.value+=1,L.value=e,A.value="Detail Project"}async function _(){console.log(c.value);const e=await U.getListProject(c.value);e.status==="SUCCESS"&&(x.data=e.data.data)}async function H(e){ye.confirm({title:"Do you want to delete account?",icon:i(fe),async onOk(){(await U.deleteProject(e)).status==="SUCCESS"&&(Ce.success("Delete successful!"),_())},onCancel(){}})}const K=e=>e==="PROJECT"?"Project":"Company",k=e=>{if(e==="NOT_STARTED")return"NOT STARTED";if(e==="PENDING")return"PENDING";if(e==="PROCESSING")return"PROCESSING";if(e==="COMPLETED")return"COMPLETED";if(e==="CANCELED")return"CANCELED"};function q(e){return e.length<=35?e:e.substring(0,35-3)+" ..."}const R=oe();function W(e,t,s){O("NAME_PROJECT",{name:t,id:e}),R.push({name:G.TASKS,params:{id:e,key:s}})}function Y(e,t,s){O("NAME_PROJECT",{name:t,id:e}),R.push({name:G.ISSUES,params:{id:e,key:s}})}function Q(){S.value=!1}return(e,t)=>(u(),h("div",Ee,[l("div",xe,[l("div",Se,[l("div",je,[i(o(le),{value:v.value,"onUpdate:value":t[0]||(t[0]=s=>v.value=s),style:{width:"300px"},placeholder:"Search by name, id..."},null,8,["value"]),l("div",ge,[o(M.exports.isEmpty)(v.value)?(u(),d(o(ne),{key:0})):(u(),d(o(ie),{key:1,onClick:t[1]||(t[1]=s=>$())}))])]),i(o(b),{value:y.value,"onUpdate:value":t[2]||(t[2]=s=>y.value=s),options:F.value,class:"ml-5 w-[10rem]"},{suffixIcon:r(()=>[i(o(D),{style:{color:"#172b4d"}})]),_:1},8,["value","options"]),i(o(b),{value:C.value,"onUpdate:value":t[3]||(t[3]=s=>C.value=s),options:V.value,class:"ml-5 w-[13rem]"},{suffixIcon:r(()=>[i(o(D),{style:{color:"#172b4d"}})]),_:1},8,["value","options"]),i(o(b),{value:f.value,"onUpdate:value":t[4]||(t[4]=s=>f.value=s),options:B.value,class:"ml-5"},{suffixIcon:r(()=>[i(o(D),{style:{color:"#172b4d"}})]),_:1},8,["value","options"])]),w.value?(u(),d(o(re),{key:0,type:"primary",onClick:t[5]||(t[5]=s=>J())},{default:r(()=>[g(" Create project ")]),_:1})):m("",!0)]),l("div",Pe,[l("div",Te,[i(o(ue),{"data-source":x.data,columns:x.columns,loading:x.loading,scroll:{y:480}},{bodyCell:r(({column:s,record:a})=>[s.dataIndex==="name"?(u(),h("div",{key:0,onClick:N=>z(a.id),class:"flex items-center"},[ke,i(o(ce),null,{title:r(()=>[g(p(a.key),1)]),default:r(()=>[g(" "+p(q(a.key)),1)]),_:2},1024)],8,Ie)):m("",!0),s.dataIndex==="content"?(u(),h(de,{key:1},[g(p(a.name),1)],64)):m("",!0),s.dataIndex==="type"?(u(),d(o(P),{key:2,color:"#F4F5F7",class:"cursor-pointe"},{default:r(()=>[l("span",Ne,[l("span",null,p(K(a.type)),1)])]),_:2},1024)):m("",!0),s.dataIndex==="lead"?(u(),h("div",be,[l("img",{src:a.avatar,alt:"",style:{width:"2.4rem",height:"2.4rem","border-radius":"50%","margin-right":"0.5rem"}},null,8,De)])):m("",!0),s.dataIndex==="status"?(u(),h("div",Oe,[l("div",null,[a.projectStatus==="NOT_STARTED"?(u(),d(o(P),{key:0,color:"#DFE1E6",class:"cursor-pointer"},{default:r(()=>[l("span",we,p(k(a.projectStatus)),1)]),_:2},1024)):a.projectStatus==="CANCELED"?(u(),d(o(P),{key:1,color:"#DFFCF0",class:"cursor-pointer"},{default:r(()=>[l("span",Le,p(k(a.projectStatus)),1)]),_:2},1024)):(a.projectStatus,u(),d(o(P),{key:2,color:"#DEEBFF",class:"cursor-pointer"},{default:r(()=>[l("span",Ae,p(k(a.projectStatus)),1)]),_:2},1024))]),l("span",Re,[i(o(pe),{trigger:"click",placement:"bottomRight"},{content:r(()=>[l("div",{class:"option",onClick:N=>W(a.id,a.key,a.name)}," Open Task ",8,Me),l("div",{class:"option",onClick:N=>Y(a.id,a.key,a.name)}," Open Issue ",8,Ge),l("div",{class:"option",onClick:N=>H(a.id)}," Delete ",8,Ue)]),default:r(()=>[i(o(ve),{style:{"font-size":"2.5rem"}})]),_:2},1024)])])):m("",!0)]),_:1},8,["data-source","columns","loading"])])]),i(o(X),{"id-project":L.value,"is-project-modal":S.value,"is-type-project":T.value,"count-project":I.value,onCloseProjectModal:t[6]||(t[6]=s=>Q())},null,8,["id-project","is-project-modal","is-type-project","count-project"])]))}});var ze=Z(Fe,[["__scopeId","data-v-5de7bbfe"]]);export{ze as default};
