import{_ as N,d as U,b as S,r as _,o as P,P as q,s as p,c as T,e as V,f as t,g as s,w as o,h as a,F as k,m as M,l as f,W as m,X as u,x as r,Z as F,Y as I,B as R,p as B,j as Y}from"./index.675d893b.js";import{d as C}from"./dayoffService.34f7e346.js";const i=y=>(B("data-v-1473f490"),y=y(),Y(),y),j={class:"page"},W={class:"page__container"},G={class:"w-full flex justify-between"},z={class:"w-[48%]"},H={class:""},J=i(()=>t("label",{class:"w-[15rem]"},"Requester",-1)),K={class:""},X=i(()=>t("label",{class:"w-[15rem]"},[r(" Approver "),t("span",{class:"text-red-600"},"*")],-1)),Z={class:""},Q=i(()=>t("label",{class:"w-[15rem]"},[r("Inform "),t("span",{class:"text-red-600"},"*")],-1)),$={class:""},ee=i(()=>t("label",{class:"w-[15rem]"},[r("Dayoff Type "),t("span",{class:"text-red-600"},"*")],-1)),se={class:"w-[48%]"},ae={class:""},te=i(()=>t("label",{class:"w-[15rem]"},[r("Session Off "),t("span",{class:"text-red-600"},"*")],-1)),le={class:""},oe=i(()=>t("label",{class:"w-[15rem]"},[r(" Off day "),t("span",{class:"text-red-600"},"*")],-1)),ne={class:""},re=i(()=>t("label",{class:"w-[15rem]"},[r("Reason "),t("span",{class:"text-red-600"},"*")],-1)),de={class:""},fe=i(()=>t("label",{class:"w-[15rem]"},[r("Note "),t("span",{class:"text-red-600"},"*")],-1)),ue=U({__name:"index",setup(y){const e=S({requestAccountId:3,approverId:void 0,informList:[],dayOffType:"",sessionOff:"",offDay:"",reason:"",note:""}),g=_([]),v=_({}),w=_([]),h=_([]);P(()=>{L();const c=localStorage.getItem("userInfo");c&&(v.value=JSON.parse(c))});async function L(){const c={pageIndex:1,pageSize:20,keyword:""},l=await q.getLisrUser(c),n=p.exports.filter(l.data.data,d=>d.role==="MANAGER"&&d.fullName!==v.value.fullname),x=p.exports.filter(l.data.data,d=>d.fullName!==v.value.fullname);h.value=p.exports.map(n,d=>({value:d.id,label:d.fullName})),g.value=p.exports.map(x,d=>({value:d.id,label:d.fullName})),w.value=l.data.data}const A=async c=>{const l=[];p.exports.forEach(w.value,d=>{p.exports.forEach(e.informList,D=>{if(d.id===D){const E={accountId:d.id,fullName:d.fullName};l.push(E)}})});const n={requestAccountId:3,approverId:e.approverId,informList:l,dayOffType:e.dayOffType,sessionOff:e.sessionOff,offDay:e.offDay,reason:e.reason,note:e.note};await C.postDayoff(n)&&(M.success("Send absent successfull!"),e.approverId=void 0,e.informList=[],e.dayOffType="",e.sessionOff="",e.offDay="",e.reason="",e.note="")},O=_(),b={reason:[{required:!0,message:"Please input reason off ",trigger:"change"}],note:[{required:!0,message:"Please input note off ",trigger:"change"}],offDay:[{required:!0,message:"Please select date ",trigger:"change"}],sessionOff:[{required:!0,message:"Please select session ",trigger:"change"}],approverId:[{required:!0,message:"Please select approver ",trigger:"change"}],informList:[{required:!0,message:"Please select HR ",trigger:"change"}],dayOffType:[{required:!0,message:"Please select day off type ",trigger:"change"}]};return(c,l)=>(T(),V("div",j,[t("div",W,[s(a(k),{ref_key:"formRef",ref:O,name:"custom-validation-ab",rules:b,model:e,onFinish:A},{default:o(()=>[t("div",G,[t("div",z,[t("div",H,[J,s(a(f),{name:"requester",class:"w-full","aria-disabled":!0},{default:o(()=>[s(a(m),{value:v.value.fullname,"onUpdate:value":l[0]||(l[0]=n=>v.value.fullname=n),disabled:""},null,8,["value"])]),_:1})]),t("div",K,[X,s(a(f),{name:"approverId",class:"w-full"},{default:o(()=>[s(a(m),{value:e.approverId,"onUpdate:value":l[1]||(l[1]=n=>e.approverId=n),style:{width:"100%"},options:h.value},null,8,["value","options"])]),_:1})]),t("div",Z,[Q,s(a(f),{name:"informList",class:"w-full"},{default:o(()=>[s(a(m),{value:e.informList,"onUpdate:value":l[2]||(l[2]=n=>e.informList=n),mode:"multiple",style:{width:"100%"},options:g.value},null,8,["value","options"])]),_:1})]),t("div",$,[ee,s(a(f),{name:"dayOffType",class:"w-full"},{default:o(()=>[s(a(m),{value:e.dayOffType,"onUpdate:value":l[3]||(l[3]=n=>e.dayOffType=n),style:{width:"100%"}},{default:o(()=>[s(a(u),{value:"SICK_LEAVE"},{default:o(()=>[r(" Sick Leave ")]),_:1}),s(a(u),{value:"UNPAID_LEAVE"},{default:o(()=>[r("Unpaid Leave")]),_:1}),s(a(u),{value:"MATERNITY_LEAVE"},{default:o(()=>[r(" Maternity Leave ")]),_:1}),s(a(u),{value:"WEDDING_LEAVE"},{default:o(()=>[r("Wedding Leave")]),_:1}),s(a(u),{value:"UNPAID_LEAVE"},{default:o(()=>[r(" Unpaid Leave ")]),_:1}),s(a(u),{value:"PAID_LEAVE"},{default:o(()=>[r("Paid Leave")]),_:1})]),_:1},8,["value"])]),_:1})])]),t("div",se,[t("div",ae,[te,s(a(f),{name:"sessionOff",class:"w-full"},{default:o(()=>[s(a(m),{value:e.sessionOff,"onUpdate:value":l[4]||(l[4]=n=>e.sessionOff=n),style:{width:"100%"}},{default:o(()=>[s(a(u),{value:"Morning"},{default:o(()=>[r(" Morning ")]),_:1}),s(a(u),{value:"Afternoon"},{default:o(()=>[r(" Afternoon ")]),_:1}),s(a(u),{value:"Fullday"},{default:o(()=>[r(" Full Day ")]),_:1})]),_:1},8,["value"])]),_:1})]),t("div",le,[oe,s(a(f),{name:"offDay",class:"w-full"},{default:o(()=>[s(a(F),{value:e.offDay,"onUpdate:value":l[5]||(l[5]=n=>e.offDay=n),"value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["value"])]),_:1})]),t("div",ne,[re,s(a(f),{name:"reason",class:"w-full"},{default:o(()=>[s(a(I),{value:e.reason,"onUpdate:value":l[6]||(l[6]=n=>e.reason=n),autocomplete:"off"},null,8,["value"])]),_:1})]),t("div",de,[fe,s(a(f),{name:"note",class:"w-full"},{default:o(()=>[s(a(I),{value:e.note,"onUpdate:value":l[7]||(l[7]=n=>e.note=n),autocomplete:"off",placeholder:"Backup c\xF4ng vi\u1EC7c",rows:4},null,8,["value"])]),_:1})])])]),s(a(f),{class:"flex justify-center w-full"},{default:o(()=>[s(a(R),{"html-type":"submit",type:"primary"},{default:o(()=>[r(" Save change ")]),_:1})]),_:1})]),_:1},8,["model"])])]))}});var pe=N(ue,[["__scopeId","data-v-1473f490"]]);export{pe as default};
