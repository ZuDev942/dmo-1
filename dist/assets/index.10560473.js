import{_ as S}from"./logo.46dbfc03.js";import{u as y,o as I,a as E,R as p,_ as k,d as x,r as C,b as N,c as u,e as g,f as t,g as c,w as i,h as r,F as P,i as A,p as B,j as T,k as L,m as h,l as _,I as F,n as O,B as R,q as U,S as V}from"./index.675d893b.js";const D={auth:"authentication",expiredToken:"expired_token",sendAuthStatus:"user",styleIframe:"style_iframe",contentReady:"content_ready",createTicket:"create_ticket",createGroupChatByPackage:"create_group_chat_by_package",createShopChatByPackage:"create_shop_chat_by_package",createChatWithBuyer:"create_direct_chat"};class M{subscribe(e){window.addEventListener("message",e,!1)}unsubscribe(e){window.removeEventListener("message",e,!1)}next(e,o){const a="*";parent.postMessage({type:e,payload:o},a)}filterStream(e,o){return e.data.type===o}}const m=new M,j=()=>{const n=y();I(()=>{m.subscribe(e)}),E(()=>{m.unsubscribe(e)});const e=o=>{const a=o.data;!m.filterStream(o,D.auth)||(console.log("eventData",a),localStorage.setItem({}.VITE_ACCESS_TOKEN_NAME,a.payload.token),n.push({name:p.LOGIN}))}};const d=n=>(B("data-v-69f7620d"),n=n(),T(),n),q={class:"page"},G=A('<div class="page__wrap" data-v-69f7620d><div class="flex items-center" data-v-69f7620d><img src="'+S+'" alt="" data-v-69f7620d><h5 data-v-69f7620d>Hrm</h5></div><div class="page__des" data-v-69f7620d><p class="page__des--1" data-v-69f7620d> Manages all your project, move fast, stay aligned, and build better - together </p><p class="page__des--2" data-v-69f7620d> Work becomes a lot more visible when it\u2019s all in one place. It makes collaboration a whole lot easier. </p></div></div>',1),H={class:"page__right"},z={class:"login"},K=d(()=>t("div",{class:"flex justify-center items-center mb-[1rem]"},[t("img",{src:S,alt:""}),t("p",null,"Hrm")],-1)),W=d(()=>t("h2",null,"Login first to your account",-1)),Y=d(()=>t("label",null,"UserID",-1)),J=d(()=>t("label",null,"Password",-1)),Q={key:0},X=d(()=>t("div",{class:"flex justify-center"},[t("a",{class:"login-form-forgot",href:"forgot"},"Forgot password?")],-1)),Z=x({__name:"index",setup(n){const e=y(),o=C(!1),a=N({username:"",password:""}),f=async v=>{var l;o.value=!0;try{const s=await L.login(a.username,a.password).finally(()=>{o.value=!1});if(s.status==="SUCCESS"){const w={avatar:s.data.avatar,email:s.data.email,fullname:s.data.fullName,role:(l=s.data)==null?void 0:l.role};localStorage.setItem("userInfo",JSON.stringify(w)),localStorage.setItem({}.VITE_ACCESS_TOKEN_NAME,s.data.token),s.data.role==="MANAGER"?e.push({name:p.USERS}):e.push({name:p.SHOP_LIVES}),h.success("Login successful")}}catch{h.error("Your ID or Password is incorrect")}},b=v=>{};return j(),(v,l)=>(u(),g("div",q,[G,t("div",H,[t("div",z,[K,W,c(r(P),{model:a,name:"normal_login",class:"login-form",onFinish:f,onFinishFailed:b},{default:i(()=>[t("div",null,[Y,c(r(_),{class:"mb-[2.5rem]",name:"username",rules:[{required:!0,message:"Please input your user id!"}]},{default:i(()=>[c(r(F),{value:a.username,"onUpdate:value":l[0]||(l[0]=s=>a.username=s),placeholder:"Username",size:"large"},null,8,["value"])]),_:1})]),t("div",null,[J,c(r(_),{class:"mb-[2.5rem]",name:"password",rules:[{required:!0,message:"Please input your password!"}]},{default:i(()=>[c(r(O),{value:a.password,"onUpdate:value":l[1]||(l[1]=s=>a.password=s),placeholder:"Password",size:"large"},null,8,["value"])]),_:1})]),c(r(_),{class:"mb-3 mt-[4rem]"},{default:i(()=>[c(r(R),{"html-type":"submit",class:"login__btn",type:"primary",value:"large"},{default:i(()=>[o.value?(u(),U(r(V),{key:1})):(u(),g("div",Q,"Login"))]),_:1})]),_:1}),X]),_:1},8,["model"])])])]))}});var ae=k(Z,[["__scopeId","data-v-69f7620d"]]);export{ae as default};
