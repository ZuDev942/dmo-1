import{g as l,E as J,d as T,G as X,c as h,e as N,w as s,h as e,H as Q,J as ge,K as U,x as u,C as Z,L as D,r as j,M as w,b as ye,f as r,N as Pe,O as I,v as be,o as Se,P as Oe,s as x,Q as je,q as y,U as Ce,V as Ee,_ as xe,l as C,I as k,W as S,X as p,Y as Ue,Z as F,$ as De,z as we,a0 as Ie,B as H,F as ke,p as Me,j as Te,m as G}from"./index.675d893b.js";import{_ as K}from"./calender.04ec6997.js";import{p as M}from"./projectService.fc7345ac.js";var Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"},Ae=Ne;function q(d){for(var n=1;n<arguments.length;n++){var c=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(c).filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable}))),i.forEach(function(f){Le(d,f,c[f])})}return d}function Le(d,n,c){return n in d?Object.defineProperty(d,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):d[n]=c,d}var A=function(n,c){var i=q({},n,c.attrs);return l(J,q({},i,{icon:Ae}),null)};A.displayName="AuditOutlined";A.inheritAttrs=!1;var Re=A,Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},$e=Ve;function W(d){for(var n=1;n<arguments.length;n++){var c=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(c).filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable}))),i.forEach(function(f){Be(d,f,c[f])})}return d}function Be(d,n,c){return n in d?Object.defineProperty(d,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):d[n]=c,d}var L=function(n,c){var i=W({},n,c.attrs);return l(J,W({},i,{icon:$e}),null)};L.displayName="TeamOutlined";L.inheritAttrs=!1;var Ye=L;const ze={class:"h-full"};T({__name:"index",props:{dataSource:{}},emits:["tableChange"],setup(d,{emit:n}){const c=d,{dataSource:i}=X(c);return(f,_)=>(h(),N("div",ze,[l(e(Q),{dataSource:e(i).data,columns:e(i).columns,bordered:"",pagination:!1,loading:e(i).loading},{bodyCell:s(({column:O,record:a,index:E})=>[O.scopedSlots?ge(f.$slots,O.scopedSlots,{key:0,record:a,column:O,index:E},void 0,!0):U("",!0)]),emptyText:s(()=>[u(Z(e(i).noDataText||"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"),1)]),_:3},8,["dataSource","columns","loading"])]))}});const Fe={class:"flex flex-col flex-grow"},Ct=T({__name:"index",setup(d){D(()=>I(()=>import("./Year.696354bc.js"),["assets/Year.696354bc.js","assets/index.675d893b.js","assets/index.7e5a9d61.css"]));const n=D(()=>I(()=>import("./Month.34d61362.js"),["assets/Month.34d61362.js","assets/Month.a220c54a.css","assets/index.675d893b.js","assets/index.7e5a9d61.css"])),c=D(()=>I(()=>import("./Dates.3c5b19f1.js"),["assets/Dates.3c5b19f1.js","assets/Dates.964daf87.css","assets/index.675d893b.js","assets/index.7e5a9d61.css","assets/yourworkService.b5aaeb7e.js","assets/timesheetService.218fb358.js"])),i=j(w().date()),f=ye({month:w().month(),year:w().year()});function _(a){i.value=null,f.month=a}function O(a){i.value=a}return(a,E)=>(h(),N("div",Pe({class:"flex space-x-5"},a.$attrs),[r("div",Fe,[l(e(n),{onSelected:_}),l(e(c),{selectedValues:f,selectedDate:i.value,onSelected:O},null,8,["selectedValues","selectedDate"])])],16))}});const P=d=>(Me("data-v-098c0706"),d=d(),Te(),d),He={class:"flex project__form"},Ge={class:"w-1/2 mr-3"},qe={class:"mb-4"},We=P(()=>r("label",{for:""},[u(" Name "),r("span",{class:"text-red-600"},"*")],-1)),Je={class:"flex justify-between mb-4"},Xe={class:"w-1/2 mr-5"},Qe=P(()=>r("label",{for:""}," Type ",-1)),Ze={class:"flex items-center"},Ke={class:"select__icon select__company"},et={class:"flex items-center"},tt={class:"select__icon select__project"},at={class:"w-1/2"},st=P(()=>r("label",{for:""},"Customer",-1)),lt={class:"mb-4"},rt=P(()=>r("label",{for:""},"Description",-1)),ot={class:"w-1/2 ml-3"},nt={class:"mb-4"},ut=P(()=>r("label",{for:""},[u(" Key "),r("span",{class:"text-red-600"},"*")],-1)),dt={class:"flex mb-4"},ct={class:"w-1/2 mr-5"},it=P(()=>r("label",{for:""},"Priority",-1)),vt={class:"w-1/2"},pt=P(()=>r("label",{for:""},"Status",-1)),ft=P(()=>r("label",{for:""},[u(" Start date "),r("span",{class:"text-red-600"},"*")],-1)),_t=P(()=>r("img",{src:K,alt:"",class:"calender__icon"},null,-1)),mt={class:""},ht=P(()=>r("label",{for:""},[u(" Plan end "),r("span",{class:"text-red-600"},"*")],-1)),gt=P(()=>r("img",{src:K,alt:"",class:"calender__icon"},null,-1)),yt={class:"project__user"},Pt={class:"flex justify-center items-center"},bt=T({__name:"index",props:{isProjectModal:{type:Boolean},idProject:{},isTypeProject:{},countProject:{}},emits:["closeProjectModal","refreshProjects"],setup(d,{emit:n}){const c=d,{isProjectModal:i,idProject:f,isTypeProject:_,countProject:O}=X(c),a=j({id:0,name:"",content:"",type:"COMPANY",priority:"LOW",customer:"",status:"NOT_STARTED",progress:0,periodStart:"",periodEnd:"",note:"",originalEstimate:"",projectUserList:[],projectWorkList:[]}),E=[{dataIndex:"add",width:"5%",key:"add"},{title:"User",dataIndex:"user",width:250,key:"user"},{title:"Position",dataIndex:"department",width:150,key:"department"},{title:"Role",key:"role",width:100},{dataIndex:"delete",width:"5%",key:"delete"}],ee=j([{value:1,label:"Developer"},{value:2,label:"Tester"},{value:3,label:"Comtor"},{value:4,label:"HR"},{value:5,label:"BrSE"}]),R=j([]),te=j(!1);function V(){n("closeProjectModal")}const ae=v=>{a.value.projectUserList=a.value.projectUserList.filter(t=>t.id!==v)},se=(v,t)=>(console.log(t.label.toLowerCase()),t.label.toLowerCase().indexOf(v.toLowerCase())>=0);function le(v,t){x.exports.filter($.value,o=>o.id===v),a.value.projectUserList[t].departmentId=1}const re=()=>{a.value.projectUserList.push({id:x.exports.size(a.projectUserList),accountId:null,departmentId:null,roleId:"MEMBER",effort:0})};be(O,v=>{g.value&&(g.value.resetFields(),g.value.clearValidate()),(_==null?void 0:_.value)==="create"?B():Y(f.value)}),Se(()=>{oe(),g.value&&(g.value.resetFields(),g.value.clearValidate()),(_==null?void 0:_.value)==="create"?B():Y(f.value);const v=localStorage.getItem("userInfo");if(v){const t=JSON.parse(v);te.value=t.role==="MANAGER"}});const $=j([]);async function oe(){const v={pageIndex:1,pageSize:100},t=await Oe.getLisrUser(v);$.value=t.data.data;const o=x.exports.map(t.data.data,m=>({value:m.id,label:m.id+" - "+m.fullName}));R.value=o}function B(){a.value={id:0,name:"",content:"",type:"COMPANY",priority:"LOW",customer:"",status:"NOT_STARTED",progress:0,periodStart:"",periodEnd:"",note:"",originalEstimate:"",projectUserList:[],projectWorkList:[]},g.value&&(g.value.resetFields(),g.value.clearValidate())}function ne(){(_==null?void 0:_.value)==="create"?ue():de()}async function ue(){(await M.createProject(a.value)).status==="SUCCESS"&&(G.success("Create project successfull"),n("refreshProjects"))}async function de(){(await M.updateProject(a.value)).status==="SUCCESS"&&(G.success("Update project successfull"),n("refreshProjects"))}async function Y(v){const t=await M.detailProject(v);t.status==="SUCCESS"&&(a.value=x.exports.cloneDeep(t.data))}function ce(v,t){return!(new Date(v)>new Date(t))}function ie(v,t){return!(new Date(v)<new Date(t))}let ve=async(v,t)=>t===""?Promise.reject("Please select date"):ce(t,a.value.periodEnd)?Promise.resolve():Promise.reject("The start date cannot be greater than the end date"),pe=async(v,t)=>t===""?Promise.reject("Please select date"):ie(t,a.value.periodStart)?(console.log(g.value),Promise.resolve()):Promise.reject("The end date must not be less than the start date");const g=j(),fe={name:[{message:"Please input project key",trigger:"change",required:!0}],content:[{required:!0,message:"Please input project name",trigger:"change"}],periodStart:[{validator:ve,trigger:"change"}],periodEnd:[{validator:pe,trigger:"change"}]},_e=je(()=>a.value.type==="PROJECT");function me(){a.value.type==="COMPANY"&&(a.value.customer="")}function he(v){const t=v.target;a.value.name=t.value.toUpperCase()}return(v,t)=>(h(),y(e(Ee),{open:e(i),"onUpdate:open":t[12]||(t[12]=o=>Ce(i)?i.value=o:null),title:e(_),width:"800px",onOk:V,onCancel:V},{footer:s(()=>[]),default:s(()=>[l(e(ke),{ref_key:"formProjectRef",ref:g,model:a.value,name:"normal_project",rules:fe,onFinish:t[11]||(t[11]=o=>ne())},{default:s(()=>[r("div",He,[r("div",Ge,[r("div",qe,[We,l(e(C),{class:"mb-[2rem] mt-2",name:"content"},{default:s(()=>[l(e(k),{value:a.value.content,"onUpdate:value":t[0]||(t[0]=o=>a.value.content=o)},null,8,["value"])]),_:1})]),r("div",Je,[r("div",Xe,[Qe,l(e(S),{ref:"selectType",value:a.value.type,"onUpdate:value":t[1]||(t[1]=o=>a.value.type=o),onChange:me},{default:s(()=>[l(e(p),{value:"COMPANY"},{default:s(()=>[r("div",Ze,[r("div",Ke,[l(e(Re),{style:{color:"#0052cc"}})]),u(" Company ")])]),_:1}),l(e(p),{value:"PROJECT"},{default:s(()=>[r("div",et,[r("div",tt,[l(e(Ye),{style:{color:"#5243aa"}})]),u(" Project ")])]),_:1})]),_:1},8,["value"])]),r("div",at,[st,l(e(k),{value:a.value.customer,"onUpdate:value":t[2]||(t[2]=o=>a.value.customer=o),disabled:!_e.value},null,8,["value","disabled"])])]),r("div",lt,[rt,l(e(Ue),{value:a.value.note,"onUpdate:value":t[3]||(t[3]=o=>a.value.note=o),rows:5,placeholder:"Description of the project"},null,8,["value"])])]),r("div",ot,[r("div",nt,[ut,l(e(C),{class:"mb-[2rem] mt-2",name:"name"},{default:s(()=>[l(e(k),{value:a.value.name,"onUpdate:value":t[4]||(t[4]=o=>a.value.name=o),onInput:he},null,8,["value"])]),_:1})]),r("div",dt,[r("div",ct,[it,l(e(S),{value:a.value.priority,"onUpdate:value":t[5]||(t[5]=o=>a.value.priority=o)},{default:s(()=>[l(e(p),{value:"LOW"},{default:s(()=>[u("Low")]),_:1}),l(e(p),{value:"MEDIUM"},{default:s(()=>[u("Medium")]),_:1}),l(e(p),{value:"HIGH"},{default:s(()=>[u("High")]),_:1}),l(e(p),{value:"URGENT"},{default:s(()=>[u("Urgen")]),_:1})]),_:1},8,["value"])]),r("div",vt,[pt,e(_)==="create"?(h(),y(e(S),{key:0,value:a.value.status,"onUpdate:value":t[6]||(t[6]=o=>a.value.status=o)},{default:s(()=>[l(e(p),{value:"NOT_STARTED"},{default:s(()=>[u("Not Started")]),_:1}),l(e(p),{value:"PENDING"},{default:s(()=>[u("Pending")]),_:1}),l(e(p),{value:"PROCESSING"},{default:s(()=>[u("Processing")]),_:1})]),_:1},8,["value"])):(h(),y(e(S),{key:1,value:a.value.status,"onUpdate:value":t[7]||(t[7]=o=>a.value.status=o)},{default:s(()=>[l(e(p),{value:"NOT_STARTED"},{default:s(()=>[u("Not Started")]),_:1}),l(e(p),{value:"PENDING"},{default:s(()=>[u("Pending")]),_:1}),l(e(p),{value:"PROCESSING"},{default:s(()=>[u("Processing")]),_:1}),l(e(p),{value:"COMPLETED"},{default:s(()=>[u("Completed")]),_:1}),l(e(p),{value:"CANCELED"},{default:s(()=>[u("Canceled")]),_:1})]),_:1},8,["value"]))])]),r("div",null,[ft,l(e(C),{name:"periodStart"},{default:s(()=>[l(e(F),{value:a.value.periodStart,"onUpdate:value":t[8]||(t[8]=o=>a.value.periodStart=o),"value-format":"YYYY-MM-DD"},{suffixIcon:s(()=>[_t]),_:1},8,["value"])]),_:1})]),r("div",mt,[ht,l(e(C),{name:"periodEnd"},{default:s(()=>[l(e(F),{value:a.value.periodEnd,"onUpdate:value":t[9]||(t[9]=o=>a.value.periodEnd=o),"value-format":"YYYY-MM-DD"},{suffixIcon:s(()=>[gt]),_:1},8,["value"])]),_:1})])])]),r("div",yt,[l(e(Q),{"data-source":a.value.projectUserList,columns:E,pagination:!1},{headerCell:s(({column:o})=>[o.key==="add"?(h(),y(e(De),{key:0,onClick:t[10]||(t[10]=m=>re())})):U("",!0)]),bodyCell:s(({column:o,record:m,index:z})=>[o.dataIndex==="add"?(h(),N(we,{key:0},[u(Z(z+1),1)],64)):U("",!0),o.key==="user"?(h(),y(e(S),{key:1,value:m.accountId,"onUpdate:value":b=>m.accountId=b,"show-search":"",placeholder:"Select a person",class:"w-[15rem]",options:R.value,"filter-option":se,onChange:b=>le(m.accountId,z)},null,8,["value","onUpdate:value","options","onChange"])):o.key==="department"?(h(),y(e(S),{key:2,ref:"select",value:m.departmentId,"onUpdate:value":b=>m.departmentId=b,options:ee.value,disabled:!0},null,8,["value","onUpdate:value","options"])):o.key==="effort"?(h(),y(e(S),{key:3,ref:"select",value:m.effort,"onUpdate:value":b=>m.effort=b},{default:s(()=>[l(e(p),{value:"25"},{default:s(()=>[u("25%")]),_:1}),l(e(p),{value:"50"},{default:s(()=>[u("50%")]),_:1}),l(e(p),{value:"75"},{default:s(()=>[u("75%")]),_:1}),l(e(p),{value:"100"},{default:s(()=>[u("100%")]),_:1})]),_:2},1032,["value","onUpdate:value"])):o.key==="role"?(h(),y(e(S),{key:4,ref:"select",value:m.roleId,"onUpdate:value":b=>m.roleId=b},{default:s(()=>[l(e(p),{value:"SUB"},{default:s(()=>[u("Sub Leader")]),_:1}),l(e(p),{value:"MEMBER"},{default:s(()=>[u("Member")]),_:1})]),_:2},1032,["value","onUpdate:value"])):o.key==="delete"?(h(),y(e(Ie),{key:5,onClick:b=>ae(m.id)},null,8,["onClick"])):U("",!0)]),_:1},8,["data-source"])]),l(e(C),{class:"flex justify-center mb-3 mt-3"},{default:s(()=>[r("div",Pt,[e(_)==="create"?(h(),y(e(H),{key:0,"html-type":"submit",type:"primary"},{default:s(()=>[u(" Create Project ")]),_:1})):(h(),y(e(H),{key:1,"html-type":"submit",type:"primary"},{default:s(()=>[u(" Update Project ")]),_:1}))])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]))}});var Et=xe(bt,[["__scopeId","data-v-098c0706"]]);export{Et as P,Ct as _};
