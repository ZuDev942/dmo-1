var ot=Object.defineProperty,dt=Object.defineProperties;var lt=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var Y=(a,e,s)=>e in a?ot(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,E=(a,e)=>{for(var s in e||(e={}))it.call(e,s)&&Y(a,s,e[s]);if(H)for(var s of H(e))rt.call(e,s)&&Y(a,s,e[s]);return a},U=(a,e)=>dt(a,lt(e));import{g as m,E as X,_ as ct,d as ut,r as k,o as pt,M as R,v as _t,s as y,b as z,c as d,e as l,f as c,z as I,A as D,C as h,K as r,D as x,h as v,aq as ft,x as L,q as M,w,B as N,I as V,H as q,V as ht,p as vt,j as mt,m as yt}from"./index.675d893b.js";import{y as xt}from"./yourworkService.b5aaeb7e.js";import{t as J}from"./timesheetService.218fb358.js";var St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"down-circle",theme:"outlined"},kt=St;function F(a){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?Object(arguments[e]):{},p=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(s).filter(function(_){return Object.getOwnPropertyDescriptor(s,_).enumerable}))),p.forEach(function(_){wt(a,_,s[_])})}return a}function wt(a,e,s){return e in a?Object.defineProperty(a,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[e]=s,a}var P=function(e,s){var p=F({},e,s.attrs);return m(X,F({},p,{icon:kt}),null)};P.displayName="DownCircleOutlined";P.inheritAttrs=!1;var gt=P,It={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.5 360.3a7.95 7.95 0 00-12.9 0l-178 246c-3.8 5.3 0 12.7 6.5 12.7H381c10.2 0 19.9-4.9 25.9-13.2L512 460.4l105.2 145.4c6 8.3 15.6 13.2 25.9 13.2H690c6.5 0 10.3-7.4 6.5-12.7l-178-246z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"up-circle",theme:"outlined"},At=It;function W(a){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?Object(arguments[e]):{},p=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(s).filter(function(_){return Object.getOwnPropertyDescriptor(s,_).enumerable}))),p.forEach(function(_){bt(a,_,s[_])})}return a}function bt(a,e,s){return e in a?Object.defineProperty(a,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[e]=s,a}var B=function(e,s){var p=W({},e,s.attrs);return m(X,W({},p,{icon:At}),null)};B.displayName="UpCircleOutlined";B.inheritAttrs=!1;var Ot=B,Ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAL9SURBVFiFpddNa51FFAfwX6LmRm9bGoi2IKmJ7uxGlwU3dqkWQRFX0g/RD2BBpbW6cNHia00XVTdVEYyoC19ji6s2G3eirmyxNNWb1ATBdDHn4U4ecue5z71/GLh35rz8n5k5Z86ZMDx240kcxiOYx95Yu4nfcAXfYAlrLWwXsR9nwuBWbfwVoz6/htPYN47jDo6jlxm9gBekr+/UZOdj7UJGtocXa7JDYRbfhZF1nNTf7hzdGHXsCvK3wsZFLXbjIP4IxR9wf0H2Cn4prM9hOWz9HraLmMWvofAephrkV2OUMIWzGYn7Bgnepb/ti01MA1djDIN3wvZPBtyJ4/rbXn35KYn9IDyDpwrri3gjfnf0j+OVuuB+6cbesv3M38fnBQdNWLL9A+bwLzaxkAueCWYnWjo4gqdb6rwavt6qJnZLcduzc6iVcFVKRG0wk/nbNSml1y6+klJqG3RwZ0udVXwt5YonJqXcDp+1NDQOKl+H4WfpTBYGig/GMHlgJzwYPi+RzvB/I+TrMQhMh89rpJCoLlJXSq838CeeHYLAunSRB+FI2LoRtquLfh0bk/FnIlPI0+9mA4EfcQ++LJC4Q/+ibuG/us9xjqCrn74vYs+QetuOYJxLOCqJh0L+0iRWYvKxEQmsS7nkexySjqOJROVrBZ4PNh+PSKDCHmkHqhevROLTkHuOlJHWYrRNxSUSxwbIzEi71pNVU6dD6eSYBEjRcAwHBqyfCl9v5pP79J/juWx+UXpSR8USzmf/H5Ce4w2piFXlgWt4HXfjI/1c8LdyxdP0HK/in/jdwYdSCL4mlWfbkJdk5wpGc7R5jt8N28sKOScvSj+QdqSEYd6CjlRZNRalFQ6GYMV2riC7gsuF9QNSSG5JrdvDTc4rzOLbUNzE27h3B7m9dm5MZqSIqhqTZSO0aVN4OQhUHdInOCq959OZ7HTMHQ2Z9dDZwEua+4siFqQCsuoR83E9Rn2+J8X5fJPxiSaBDF0p5z+OR4NYvT2/LLXnX0i70IjbwaHfMI0d8l0AAAAASUVORK5CYII=";const A=a=>(vt("data-v-af6f2f02"),a=a(),mt(),a),Dt={class:"w-full"},jt={class:"grid grid-cols-7 place-items-center"},Rt={class:"text-gray-500 font-semibold"},Lt={class:"date__head flex justify-between"},Nt={key:0,class:"text-[#374151] font-[500]"},Pt={key:1},Bt={class:"text-[1.6rem] date__text"},Tt={class:"date__task"},Ht={class:"date__des"},Yt={class:"date__bot flex justify-between items-center"},Et={key:0,class:"date__time"},Ut=A(()=>c("img",{src:Ct,alt:""},null,-1)),zt=A(()=>c("span",null,"8h",-1)),Mt=[Ut,zt],Vt={class:"modal__wrap pt-[2rem]"},qt={class:"todo"},Jt=A(()=>c("h3",{class:"todo__title"},"TO DO TASK",-1)),Ft={class:"todo__search"},Wt=A(()=>c("br",null,null,-1)),Xt={class:"todo"},Gt=A(()=>c("h3",{class:"todo__title"},"DAILY REPORT",-1)),Qt={class:"todo__search"},Zt=["onClick"],$t={key:1,class:"column__item"},Kt={key:2,class:"column__item"},te={key:3,class:"column__item"},ee={key:4,class:"column__item"},ae={key:5,class:"column__item"},se={key:6,class:"column__item"},ne={key:7,class:"column__item"},oe={class:"flex justify-center w-full"},de=ut({__name:"Dates",props:{selectedValues:{},selectedDate:{}},emits:["selected"],setup(a,{emit:e}){const s=a,p=k(null),_=k([]),G=new Date().getDate(),b=k(!1),O=k(""),C=k(0),Q=k([]);pt(()=>{console.log(G),T();const o=new Date().getDate();C.value=o,console.log(o),tt()}),_t(()=>s.selectedValues,i=>{p.value=null,T(i.month,i.year)},{deep:!0});const Z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];async function T(i=R().month(),o=R().year()){_.value=[];let t=R().month(i).year(o);t.daysInMonth();const n={month:i+1,year:o},u=await J.getDashboardPersonal(n),g=y.exports.map(u.data,(j,nt)=>({date:parseInt(j.dayOfMonth),day:t.date(nt).day(),taskList:j.taskList,haveReported:j.haveReported}));_.value=g}function $(i){p.value=i.date,b.value=!0,console.log(i);const o=i==null?void 0:i.taskList;if(!y.exports.isEmpty(o)){const t=f.data.filter(n=>o.some(u=>u.taskId===n.id));console.log(y.exports.isEmpty(o)),y.exports.forEach(o,n=>{const u=y.exports.findIndex(f.data,g=>g.id===n.taskId);console.log("index",u,f.data[u]),f.data[u].isSelected=!0}),S.data=t}}const S=z({loading:!1,noDataText:"No data",pagination:{totalPage:0,page:1},data:[],columns:[{title:"Action",dataIndex:"action",scopedSlots:"action",width:35,fixed:"left"},{title:"Project",dataIndex:"project",scopedSlots:"project",width:170},{title:"Task",dataIndex:"task",scopedSlots:"task",width:300},{title:"Priority",dataIndex:"priority",scopedSlots:"priority",width:60},{title:"Plan End",dataIndex:"planend",scopedSlots:"planend",width:100},{title:"Effort",dataIndex:"effort",scopedSlots:"effort",width:60},{title:"Status",dataIndex:"status",scopedSlots:"status",width:100},{title:"Note",dataIndex:"note",scopedSlots:"note",width:100,fixed:"right"}]}),f=z({loading:!1,noDataText:"No data",pagination:{totalPage:0,page:1},data:[],columns:[{title:"Action",dataIndex:"action",scopedSlots:"action",width:35,fixed:"left"},{title:"Project",dataIndex:"project",scopedSlots:"project",width:170},{title:"Task",dataIndex:"task",scopedSlots:"task",width:300},{title:"Priority",dataIndex:"priority",scopedSlots:"priority",width:60},{title:"Plan End",dataIndex:"planend",scopedSlots:"planend",width:100},{title:"Effort",dataIndex:"effort",scopedSlots:"effort",width:60},{title:"Status",dataIndex:"status",scopedSlots:"status",width:100},{title:"Note",dataIndex:"note",scopedSlots:"note",width:100}]});function K(){}async function tt(){const i={pageIndex:1,pageSize:100},o=await xt.getListTask(i);Q.value=o.data.data,f.data=y.exports.map(o.data.data,t=>U(E({},t),{isSelected:!1})),console.log(f.data)}function et(i,o){f.data[o].isSelected=!0;const t=f.data[o];S.data.push(t)}function at(i,o){const t=y.exports.findIndex(f.data,n=>n.id===i);f.data[t].isSelected=!1,S.data.splice(o,1)}async function st(){if(y.exports.isEmpty(S.data)){yt.warning("Please select task and work notes for today");return}const i=y.exports.map(S.data,t=>({projectName:"Human Resource",taskId:t.id,taskName:t.content,priority:"LOW",effort:8,progress:0,deadLine:t.dueDate,status:t.projectStatus,deliveryStatus:"NOT_YET",note:"abc"}));console.log(i),(await J.postReportDaily(i)).status==="SUCCESS"&&(b.value=!1)}return(i,o)=>(d(),l("div",Dt,[c("div",jt,[(d(),l(I,null,D(Z,t=>c("div",{key:t,class:"date__week"},[c("span",Rt,h(t.substr(0,3)),1)])),64)),(d(!0),l(I,null,D(_.value,(t,n)=>(d(),l(I,{key:t},[n==0?(d(!0),l(I,{key:0},D(t.day,u=>(d(),l("div",{key:u,class:"date"}))),128)):r("",!0),c("div",{class:x(["date",{"date-active":t.date===C.value,warning:!t.haveReported&&t.date<C.value}])},[c("div",Lt,[t.haveReported?(d(),l("div",Nt,[m(v(ft)),L(" Daily report ")])):(d(),l("div",Pt)),c("div",Bt,h(t.date),1)]),c("div",Tt,[(d(!0),l(I,null,D(t.taskList,u=>(d(),l("div",Ht,h(u.taskContent),1))),256))]),c("div",Yt,[t.taskList?(d(),l("div",Et,Mt)):r("",!0),t.date<=C.value?(d(),M(v(N),{key:1,class:x(["date__btn",{"date__btn--report":t.haveReported}]),onClick:u=>$(t)},{default:w(()=>[L(" Report ")]),_:2},1032,["class","onClick"])):r("",!0)])],2)],64))),128))]),m(v(ht),{open:b.value,"onUpdate:open":o[3]||(o[3]=t=>b.value=t),width:"80%",bodyStyle:{padding:0,"border-radius":"10px"},footer:null,onOk:K,title:"DAILY REPORT"},{default:w(()=>[c("div",Vt,[c("div",qt,[Jt,c("div",Ft,[m(v(V),{value:O.value,"onUpdate:value":o[0]||(o[0]=t=>O.value=t),placeholder:"Search task..."},null,8,["value"])]),m(v(q),{class:"table__top",columns:f.columns,"data-source":f.data,pagination:!1,scroll:{y:125,x:2e3},bordered:""},{bodyCell:w(({column:t,record:n,index:u})=>[t.dataIndex==="action"?(d(),M(v(N),{key:0,class:"column__item flex items-center w-full justify-center",onClick:g=>et(n.id,u),disabled:n.isSelected,type:"text"},{default:w(()=>[m(v(gt))]),_:2},1032,["onClick","disabled"])):r("",!0),t.dataIndex==="project"?(d(),l("div",{key:1,class:x(["column__item",{select:n.isSelected}])}," Human resource ",2)):r("",!0),t.dataIndex==="task"?(d(),l("div",{key:2,class:x(["column__item",{select:n.isSelected}])},h(n.content),3)):r("",!0),t.dataIndex==="priority"?(d(),l("div",{key:3,class:x(["column__item",{select:n.isSelected}])}," Low ",2)):r("",!0),t.dataIndex==="planend"?(d(),l("div",{key:4,class:x(["column__item",{select:n.isSelected}])},h(n.dueDate),3)):r("",!0),t.dataIndex==="effort"?(d(),l("div",{key:5,class:x(["column__item",{select:n.isSelected}])},h(n.effort),3)):r("",!0),t.dataIndex==="status"?(d(),l("div",{key:6,class:x(["column__item",{select:n.isSelected}])},h(n.projectStatus),3)):r("",!0),t.dataIndex==="note"?(d(),l("div",{key:7,class:x(["column__item",{select:n.isSelected}])},null,2)):r("",!0)]),_:1},8,["columns","data-source"])]),Wt,c("div",Xt,[Gt,c("div",Qt,[m(v(V),{value:O.value,"onUpdate:value":o[1]||(o[1]=t=>O.value=t),placeholder:"Search task..."},null,8,["value"])]),m(v(q),{columns:S.columns,"data-source":S.data,pagination:!1,bordered:"",scroll:{y:125,x:2e3}},{bodyCell:w(({column:t,record:n,index:u})=>[t.dataIndex==="action"?(d(),l("div",{key:0,class:"column__item flex justify-center w-full",onClick:g=>at(n.id,u)},[m(v(Ot))],8,Zt)):r("",!0),t.dataIndex==="project"?(d(),l("div",$t,"Human resource")):r("",!0),t.dataIndex==="task"?(d(),l("div",Kt,h(n.content),1)):r("",!0),t.dataIndex==="priority"?(d(),l("div",te,"Low")):r("",!0),t.dataIndex==="planend"?(d(),l("div",ee,h(n.dueDate),1)):r("",!0),t.dataIndex==="effort"?(d(),l("div",ae,h(n.effort),1)):r("",!0),t.dataIndex==="status"?(d(),l("div",se,h(n.projectStatus),1)):r("",!0),t.dataIndex==="note"?(d(),l("div",ne)):r("",!0)]),_:1},8,["columns","data-source"])])]),c("div",oe,[m(v(N),{onClick:o[2]||(o[2]=t=>st()),type:"primary"},{default:w(()=>[L("Report")]),_:1})])]),_:1},8,["open"])]))}});var pe=ct(de,[["__scopeId","data-v-af6f2f02"]]);export{pe as default};
